#aw

rocker --network=host -e RMW_IMPLEMENTATION=rmw_cyclonedds_cpp -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --nvidia --volume /home/tisildar/TUM/carla_aw_sim/  -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda
cd /home/tisildar/TUM/carla_aw_sim/autoware
./setup-dev-env.sh --download-artifacts
sudo apt update
rosdep update
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
source install/setup.bash

ros2 launch autoware_launch e2e_simulator.launch.xml vehicle_model:=carla_t2_vehicle sensor_model:=carla_t2_sensor_kit map_path:=/home/tisildar/TUM/carla_aw_sim/maps/carla-autoware-bridge/Town10/ rviz:=false

#aw-2
docker ps
docker exec -it  bash

#Carla
docker run --privileged --gpus all --net=host -e DISPLAY=$DISPLAY carlasim/carla:0.9.15 /bin/bash ./CarlaUE4.sh -carla-rpc-port=2608 -RenderOffScreen

#carla-aw-bridge
docker run -it -e RMW_IMPLEMENTATION=rmw_cyclonedds_cpp --network host tumgeka/carla-autoware-bridge:carla_aw_t_depth
source install/setup.bash
ros2 launch carla_autoware_bridge carla_aw_bridge.launch.py port:=2608 town:=Town10HD

#carla-aw-bridge2
docker ps
docker exec -it  bash
python3 src/carla_autoware_bridge/utils/generate_traffic.py -p 2608